-@ val title: String
- import nu.u8.estoril._
- import java.time._
-@ val contents: Seq[Content]
-@ val allTags: Seq[String]
-@ val lang: String
-@ val css: String
-@ val updatedAt: ZonedDateTime
-@ val createdAt: ZonedDateTime
-@ val root: String
-@ val highlighted: Set[String]
-@ val path: String
!!! XML
!!! 5
html(xmlns='http://www.w3.org/1999/xhtml' lang='ja' xml:lang='ja')
  head
    meta(charset='utf-8')
    meta(name='generator' content='Estoril 0.0.0.10')
    meta(name='viewport' content='width=device-width, initial-scale=1.0, user-scalable=yes')
    meta(name='author' content='sumito3478')
    meta(name='dcterms.date' content='#{updatedAt.toLocalDate}')
    title #{title}
    link(type='application/atom+xml' rel='alternate' href='${root}/article/all.xml')
    link(rel='preload' href='#{root}/EBGaramond12-Regular.woff2' as='font')
    link(rel='preload' href='#{root}/LogoTypeGothic.woff2' as='font')
    link(rel='preload' href='#{root}/FiraCode-Retina.woff2' as='font')
    link(rel='preload' href='#{root}/style.css' as='style')
    script(src='http://code.jquery.com/jquery-1.11.1.min.js')
    :!javascript
      if (!window.u8nu)
        window.u8nu = {};
      if (!window.u8nu.estoril)
        window.u8nu.estoril = {};
      window.u8nu.estoril.shadowDOMSupported = !!HTMLElement.prototype.attachShadow;
    - if (!highlighted.isEmpty)
      script(src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/highlight.min.js')
      - for (lang <- highlighted)
        script(src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.0/languages/#{lang}.min.js')
      :!javascript
        $(document).ready(function() {
          hljs.configure({languages: [#{highlighted.mkString("'", "','", "'")}]});
          $('pre').each(function(i, pre) {
            Array.prototype.forEach.call(pre.getElementsByTagName('code'), function(code) {
              $(code).addClass(pre.getAttribute('class'));
              hljs.highlightBlock(code);
            });
          });
        });
    :!javascript
      document.addEventListener("DOMContentLoaded", function() {
        // Do not use Shadow DOM polyfill and use closed mode to make it difficult for crawlers to get the mail address,
        // although, technically, they can get every information they have in their headless browser.
        if (window.u8nu.estoril.shadowDOMSupported) {
          Array.prototype.forEach.call(document.getElementsByClassName("mailto"), function(target) {
            var addr = target.textContent.replace(' -AT- ', '@');
            var url = 'mailto:' + addr;
            var shadow = target.attachShadow({ mode: 'closed' });
            var a = document.createElement('a');
            a.setAttribute('href', url);
            a.textContent = addr;
            shadow.appendChild(a);
          });
        }
      });
  body
    aside#site-aside
      header#site-header
        h1
          a(href='#{root}/index.xhtml') Sine Lite Dies
    #document-root
      #document-contents
        :!pandoc-markdown
          # #{title}
        - for (Content(body, metaData, tags, title, permalink, updatedAt, createdAt, urn) <- contents)
          #document-content
            header
              :!pandoc-markdown
                # [#{title}](#{root}/#{permalink})
              ul.metadata
                - for ((title, data) <- metaData)
                  dt #{title}
                  dd
                    :!pandoc-markdown
                      #{data}
                dt 初稿
                dd #{createdAt.toLocalDate}
                dt 最終更新日
                dd #{updatedAt.toLocalDate}
                dt tags
                dd
                  - for (tag <- tags)
                    a(href='#{root}/tag/#{tag}.xhtml') #{tag}
            .body
              :!pandoc-markdown
                #{body}
      div
        p
          | コメント機能は開発中です。コメントしたい場合は
          | <span class='mailto'>tomoaki3478 -AT- u8.nu</span>
          | にその旨を添えてメールしていてだければさしあたって本文中で引用します。
          | コメント機能の完成後は通常のコメントに移行します。
      style
        :!plain
          @font-face {
            font-family: "EB Garamond";
            src: url("#{root}/EBGaramond12-Regular.woff2");
          }
          @font-face {
            font-family: "LogoTypeGothic";
            src: url("#{root}/LogoTypeGothic.woff2");
          }
          @font-face {
            font-family: "Fira Code";
            src: url("#{root}/FiraCode-Retina.woff2");
          }
      link(rel='stylesheet' href='#{root}/style.css')
-# vim:set ts=2 sw=2 et:
